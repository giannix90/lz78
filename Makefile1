OBJ = lz78.o bitio.o main.o info.o
SRC = ${OBJ:.o=.c}
CFLAGS=-Wall -O2 -Werror
BIN=/bin
RM= rm

.SUFFIXES: .c .o

.c.o:
	$(CC) -c $(CFLAGS) $<

all: lz78

lz78: $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o lz78 -lcrypto

main.o:	lz78.h main.c
		

lz78.o:  lz78.h bitio.h info.h
		

bitio.o:  bitio.h
		

info.o:	 info.h bitio.h
		 

install:
	@echo \install..\N
	@sudo install -g 0 -o 0 -m 0644 man/lz78.1 /usr/share/man/man1/
	@sudo gzip /usr/share/man/man1/lz78.1
	@sudo mandb
	@sudo cp lz78 $(BIN) && echo Install OK

clean:
	@if test -s "lz78" | test -s "bitio.o" | test -s "lz78.o" | test -s "info.o" | test -s "main.o"; \
	then\
		$(RM) lz78 main.o bitio.o info.o lz78.o && echo Files removed.. ; \
		else\
			echo Clean...; \
	fi ;


	
